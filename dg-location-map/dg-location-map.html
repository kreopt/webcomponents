<link rel="import" href="/static/bower_components/polymer/polymer.html">

<polymer-element name="dg-location-map" attributes="lat lon zoom id staic">
    <template>
        <template if="{{ !static }}">
            <div class="map" id="{{ id }}"></div>
        </template>
        <template if="{{ static }}">
            <!-- TODO: map size -->
            <img class="map"
                 src="http://static.maps.api.2gis.ru/1.0?zoom={{zoom}}&size=500,350&markers={{lat}},{{lon}}">
        </template>
    </template>
    <script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full" data-id="dgLoader"></script>
    <script>
        Polymer({
            ready: function () {
                var _this = this;
                if (!this.static) {
                    DG.then(function () {
                        var map = DG.map(this.id, {
                            "center": [_this.lat, _this.lon],
                            "zoom": _this.zoom
                        });
                        DG.marker([_this.lat, _this.lon]).addTo(map);
                    });
                }
            }
        });
    </script>
    <style></style>
</polymer-element>
